<!DOCTYPE html>
<html lang="th" data-theme="studio-blue">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#1a202c" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Mobile RTA (Pro)</title>

  <style>
    /* ====== (‡∏Ñ‡∏á‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏ß‡πâ) ======
       ‚Üì‚Üì‚Üì ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πÑ‡∏ï‡∏•‡πå ‚Äú‡πÄ‡∏î‡∏¥‡∏°‚Äù ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ñ‡∏∏‡∏ì (‡∏ó‡∏±‡πâ‡∏á‡∏ò‡∏µ‡∏°, ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ß‡∏≤‡∏á, ‡∏õ‡∏∏‡πà‡∏°, ‡πÅ‡∏Ñ‡∏ô‡∏ß‡∏≤‡∏™ ‡∏Ø‡∏•‡∏Ø) ‚Üì‚Üì‚Üì
       ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà ‡∏ú‡∏°‡∏Ñ‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πâ ‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏∞‡∏ï‡πâ‡∏≠‡∏á
    */

    :root, [data-theme="dark-matter"]{ --bg1:#1a202c; --bg2:#1a202c; --card:#2d3748; --text:#cbd5e1; --muted:#718096;
      --gridH:rgba(255,255,255,.08); --gridV:rgba(255,255,255,.04); --frame:rgba(255,255,255,.1); --label:rgba(255,255,255,.85);
      --fft:#68d391; --peak:#b794f4; --hold:#f6ad55; --bar:#68d391;
      --heatmap-color-1:#1a202c; --heatmap-color-2:#4a5568; --heatmap-color-3:#68d391; --heatmap-color-4:#f6ad55; --heatmap-color-5:#e53e3e;
      --dba-meter-bg-green:#48bb78; --dba-meter-bg-yellow:#f6ad55; --dba-meter-bg-orange:#ed8936; --dba-meter-bg-red:#e53e3e;
      --accent-color:#2DD4BF;
      --select-bg:rgba(0,0,0,.28); --select-bg-hover:rgba(255,255,255,.06);
      --select-border:rgba(255,255,255,.14); --select-border-focus:rgba(45,212,191,.65);
      --select-shadow:0 2px 8px rgba(0,0,0,.35) inset, 0 0 0 0 rgba(0,0,0,0);
      --select-shadow-focus:0 0 0 2px rgba(45,212,191,.25);
    }
    [data-theme="studio-blue"]{
      --bg1:#0F172A; --bg2:#1E293B; --card:#1E293B; --text:#E2E8F0; --muted:#64748B;
      --gridH:rgba(255,255,255,.10); --gridV:rgba(255,255,255,.05);
      --frame:rgba(255,255,255,.12); --label:rgba(255,255,255,.90);
      --fft:#22D3EE; --peak:#A5B4FC; --hold:#F472B6; --bar:#22D3EE;
      --heatmap-color-1:#0F172A; --heatmap-color-2:#334155; --heatmap-color-3:#0EA5E9;
      --heatmap-color-4:#A78BFA; --heatmap-color-5:#F472B6;
      --dba-meter-bg-green:#22D3EE; --dba-meter-bg-yellow:#A78BFA; --dba-meter-bg-orange:#EC4899; --dba-meter-bg-red:#F43F5E;
      --accent-color:#60A5FA;
      --select-bg:rgba(30,41,59,.55); --select-bg-hover:rgba(30,41,59,.75);
      --select-border:rgba(255,255,255,.16); --select-border-focus:rgba(96,165,250,.7);
      --select-shadow:0 2px 8px rgba(0,0,0,.35) inset, 0 0 0 0 rgba(0,0,0,0);
      --select-shadow-focus:0 0 0 2px rgba(96,165,250,.25);
    }
    [data-theme="vintage-amber"]{ /* ...‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°... */ }
    [data-theme="midnight-neon"]{ /* ...‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°... */ }
    [data-theme="emerald-gold"]{ /* ...‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°... */ }

    :root{ color-scheme:dark }
    html{ background:var(--bg1) }
    body{
      margin:0; height:100%;
      background:radial-gradient(1200px 600px at 70% -10%, var(--card) 10%, var(--bg1) 60%, var(--bg2) 100%);
      color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai",sans-serif;
      -webkit-touch-callout:none; -webkit-user-select:none; user-select:none; overscroll-behavior:contain;
      transition: background .3s, color .3s;
    }
    /* safe-area overlays ‡πÄ‡∏î‡∏¥‡∏° */
    body::before,body::after{content:"";position:fixed;left:0;right:0;z-index:9999;background:var(--bg1);pointer-events:none}
    body::before{top:0;height:env(safe-area-inset-top)} body::after{bottom:0;height:env(safe-area-inset-bottom)}
    @supports(padding: env(safe-area-inset-left)){
      html::before,html::after{content:"";position:fixed;top:0;bottom:0;background:var(--bg1);z-index:9998;pointer-events:none}
      html::before{left:0;width:env(safe-area-inset-left)} html::after{right:0;width:env(safe-area-inset-right)}
    }

    .wrap{display:flex;flex-direction:column;gap:12px;max-width:920px;margin:0 auto;
      padding-left:calc(12px + env(safe-area-inset-left));
      padding-right:calc(12px + env(safe-area-inset-right));
      padding-top:calc(12px + env(safe-area-inset-top));
      padding-bottom:calc(12px + env(safe-area-inset-bottom));
    }
    .row{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.1);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:12px; transition: background-color .3s, border-color .3s;}

    /* ...‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì... */

    /* fullscreen fallback (‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô iPad PWA)
       .card.is-fullscreen{position:fixed;inset:0;z-index:9999;margin:0;border-radius:0;width:100vw;height:100vh}
       .card.is-fullscreen .plot{height:calc(100vh - 120px)}
       :fullscreen .plot{height:calc(100vh - 120px)}
       :fullscreen canvas, .card.is-fullscreen canvas{height:100%!important}
    */

    /* -----------------------------------------------------------
       iPad PWA Fullscreen Safe-Area Fix
       ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢: ‡∏ö‡∏ô iPad ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏™‡πÅ‡∏ï‡∏ô‡∏≠‡∏∞‡πÇ‡∏•‡∏ô‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏Ç‡∏¢‡∏≤‡∏¢
       ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ 100vw/100vh ‡∏à‡∏∞‡∏Å‡∏¥‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ safe-area ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏ï‡∏Å‡∏Ç‡∏≠‡∏ö
       ‡πÅ‡∏û‡∏ï‡∏ä‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏¢‡∏∂‡∏î‡∏Ç‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ env(safe-area-inset-*) ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ dvh
       ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏û‡∏≠‡∏î‡∏µ‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ (‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á/‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô)
       ----------------------------------------------------------- */
    .card.is-fullscreen{
      position: fixed;
      /* ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏à‡∏≠‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û safe-area ‡∏ó‡∏∏‡∏Å‡∏î‡πâ‡∏≤‡∏ô */
      top:    env(safe-area-inset-top);
      right:  env(safe-area-inset-right);
      bottom: env(safe-area-inset-bottom);
      left:   env(safe-area-inset-left);
      z-index: 9999;
      margin: 0;
      border-radius: 0;
      /* ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ 100vw/100vh ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏•‡πâ‡∏ô‡∏Ç‡∏ß‡∏≤ */
      width: auto !important;
      height: auto !important;
      padding: 12px 12px 12px 12px;
      box-sizing: border-box;
      overflow: hidden;
    }
    /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≤‡∏ü‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ü‡∏π‡∏•‡∏™‡∏Å‡∏£‡∏µ‡∏ô */
    .card.is-fullscreen .plot{
      height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 120px) !important;
      min-height: 0;
    }
    /* ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏¢‡∏≠‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏π‡∏•‡∏™‡∏Å‡∏£‡∏µ‡∏ô‡∏à‡∏£‡∏¥‡∏á */
    :fullscreen{
      /* ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏ñ‡πâ‡∏≤‡∏°‡∏µ safe-area ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ (‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô 0) */
      padding: max(0px, env(safe-area-inset-top)) max(0px, env(safe-area-inset-right))
               max(0px, env(safe-area-inset-bottom)) max(0px, env(safe-area-inset-left));
      box-sizing: border-box;
    }
    :fullscreen .plot{
      height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 120px) !important;
      min-height: 0;
    }
    :fullscreen canvas, .card.is-fullscreen canvas{
      height: 100% !important;
      width: 100% !important;
    }

    /* ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏ö‡∏ô‡∏à‡∏≠‡πÑ‡∏°‡πà‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏°‡∏≤‡∏Å (iPad/‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏•‡πá‡∏ï) ‚Äì ‡∏Ñ‡∏á‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏•‡πâ‡∏ô */
    @media (max-width: 920px) and (orientation: landscape){
      .card.is-fullscreen{
        display:flex; flex-direction:column;
        padding-top:8px; /* ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° */
      }
      .card.is-fullscreen > .row:first-child{ flex-shrink:0 }
      .card.is-fullscreen .plot{ flex-grow:1 }
    }
  </style>
</head>

<body>
  <!-- ===== (‡∏Ñ‡∏á HTML ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) ===== -->
  <div class="wrap">
    <div id="errBox" class="card" style="display:none;border-color:#e53e3e;background:#1c2430">
      <b style="color:#fca5a5">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ</b>
      <div id="errMsg" class="hint" style="color:#fca5a5">‚Äî</div>
      <div class="row" style="margin-top:8px">
        <button id="btnStartDemo" class="secondary">üß™ ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏î‡πÇ‡∏°‡πà (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡∏Ñ‡πå)</button>
        <span class="hint">‡∏ñ‡πâ‡∏≤‡∏ö‡∏£‡∏≤‡∏ß‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÑ‡∏°‡∏Ñ‡πå ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ HTTPS ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏£‡∏π‡∏õ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï</span>
      </div>
    </div>

    <div class="card">
      <div class="row" style="justify-content:space-between;align-items:center;">
        <h2 style="margin:0 0 4px 0">my RTAs (v 1.9.8)</h2>
        <div class="row">
          <button id="btnStart">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏î</button>
          <button id="btnStop" class="secondary" disabled>‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î</button>
          <button id="btnHold" class="ghost" aria-pressed="true">üìå Hold Peak: ON</button>
          <button id="btnClear" class="secondary">‚ôªÔ∏è Clear Peak & ATH</button>
          <button id="btnAweight" class="ghost" aria-pressed="false" title="‡∏™‡∏•‡∏±‡∏ö A-weighting">A-weighting: OFF</button>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <label> Smoothing <input id="smoothing" type="range" min="0" max="0.95" step="0.01" value="0.75"></label>
        <label> Averaging <input id="avg" type="checkbox" checked></label>
      </div>

      <div class="row" style="justify-content:space-between;">
        <div class="row">
          <label>‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏õ‡∏¥‡∏î DSP ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö:</label>
          <div class="row">
            <label>echoCancellation <input id="ec" type="checkbox" checked></label>
            <label>noiseSuppression <input id="ns" type="checkbox" checked></label>
            <label>autoGainControl <input id="agc" type="checkbox" checked></label>
          </div>
        </div>
        <label>Theme
          <select id="themeSelector">
            <option value="dark-matter">Dark Matter</option>
            <option value="studio-blue" selected>Studio Blue</option>
            <option value="vintage-amber">Vintage Amber</option>
            <option value="midnight-neon">Midnight Neon</option>
            <option value="emerald-gold">Emerald Gold</option>
          </select>
        </label>
      </div>
    </div>

    <div class="meters">
      <!-- FFT -->
      <div class="card" id="fftCard">
        <div class="row" style="justify-content:space-between;align-items:center;">
          <div class="row">
            <b>FFT - </b>
            <select id="fftYScale">
              <option value="log" selected>Log</option>
              <option value="linear">Linear</option>
            </select>
          </div>
          <div class="badges">
            <span class="badge" id="fftPeakText">Peak: ‚Äî</span>
            <span class="badge" id="fftHoldText" style="display:none;">Hold: ‚Äî</span>
          </div>
          <div class="toolbar">
            <div class="stack">
              <label>FFT Size
                <input id="fftRangeSlider" type="range" min="0" max="3" step="1" value="1" aria-label="FFT size preset">
                <select id="fftSizePreset">
                  <option value="2048">2048</option>
                  <option value="4096" selected>4096</option>
                  <option value="8192">8192</option>
                  <option value="16384">16384</option>
                </select>
              </label>
            </div>
            <button class="ghost icon-btn" id="fsFFT" title="Fullscreen" aria-label="Fullscreen">
              <!-- (‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                   stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M3 9V5a2 2 0 0 1 2-2h4"/>
                <path d="M21 9V5a2 2 0 0 0-2-2h-4"/>
                <path d="M3 15v4a2 2 0 0 0 2 2h4"/>
                <path d="M21 15v4a2 2 0 0 1-2 2h-4"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="plot">
          <canvas id="fftCanvas"></canvas>
          <div id="fftTip" class="tip" style="display:none">‚Äî</div>
        </div>
      </div>

      <!-- Octave -->
      <div class="card" id="octCard">
        <div class="row" style="justify-content:space-between;align-items:center;">
          <div class="row">
            <select id="octRes">
              <option value="3">1/3</option>
              <option value="6">1/6</option>
              <option value="12" selected>1/12</option>
              <option value="24">1/24</option>
            </select>
            <b>Oct</b>
          </div>
          <div class="badges">
            <span class="badge" id="octPeakText">Peak: ‚Äî</span>
            <span class="badge" id="octHoldText" style="display:none;">Hold: ‚Äî</span>
          </div>
          <div class="toolbar">
            <div class="stack">
              <label>Range
                <input id="octRangeSlider" type="range" min="64" max="1023" step="1" value="255" aria-label="Octave bar range">
                <select id="octRangePreset">
                  <option value="127">127</option>
                  <option value="255" selected>256</option>
                  <option value="511">512</option>
                </select>
              </label>
              <span class="hint" id="octRangeText">0‚Äì255</span>
            </div>
            <button class="ghost icon-btn" id="fsOct" title="Fullscreen" aria-label="Fullscreen">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                   stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M3 9V5a2 2 0 0 1 2-2h4"/>
                <path d="M21 9V5a2 2 0 0 0-2-2h-4"/>
                <path d="M3 15v4a2 2 0 0 0 2 2h4"/>
                <path d="M21 15v4a2 2 0 0 1-2 2h-4"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="plot">
          <canvas id="octCanvas"></canvas>
          <div id="octTip" class="tip" style="display:none">‚Äî</div>
        </div>
      </div>

      <!-- Spectrogram -->
      <div class="card" id="heatmapCard">
        <div class="row" style="justify-content:space-between;align-items:center;">
          <div class="row">
            <button id="btnToggleHeatmap" class="ghost" aria-pressed="false">OFF</button>
            <button id="btnHeatmapQuality" class="ghost" aria-pressed="true">HD</button>
          </div>
          <div class="badges">
            <span class="badge" id="heatmapAthText">ATH: ‚Äî</span>
            <button id="btnClearAth" class="ghost" style="font-size:12px;padding:4px 8px; margin-left:4px;">Clear</button>
          </div>
          <div class="toolbar">
            <div class="stack">
              <label>Range
                <input id="heatmapRangeSlider" type="range" min="5" max="100" step="5" value="50" aria-label="Heatmap range">
                <select id="heatmapRangePreset">
                  <option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="40">40</option>
                  <option value="50" selected>50</option><option value="60">60</option><option value="80">80</option><option value="100">100</option>
                </select>
              </label>
              <span class="hint" id="heatmapRangeText">-50 dBFS</span>
            </div>
            <button class="ghost icon-btn" id="fsHeat" title="Fullscreen" aria-label="Fullscreen">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                   stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M3 9V5a2 2 0 0 1 2-2h4"/>
                <path d="M21 9V5a2 2 0 0 0-2-2h-4"/>
                <path d="M3 15v4a2 2 0 0 0 2 2h4"/>
                <path d="M21 15v4a2 2 0 0 1-2 2h-4"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="plot">
          <canvas id="heatmapCanvas"></canvas>
          <div id="heatmapTip" class="tip" style="display:none">‚Äî</div>
        </div>
      </div>

      <!-- dB meter -->
      <div class="card">
        <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:2px">
          <b>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏á‡∏£‡∏ß‡∏° dB</b>
          <button id="btnResetDba" class="secondary" style="font-size:12px;padding:6px 10px;">‚ôªÔ∏è Reset AVG/MAX</button>
        </div>
        <div id="dbMeterContainer">
          <canvas id="dbMeterCanvas"></canvas>
          <span class="dbLabel" style="left:0%">0</span>
          <span class="dbLabel" style="left:28.57%">40</span>
          <span class="dbLabel" style="left:57.14%">80</span>
          <span class="dbLabel" style="left:85.71%">120</span>
          <span class="dbLabel" style="right:0">140</span>
        </div>
        <div class="values-grid" style="margin-top:12px;">
          <div class="kv-item"><b>Realtime (dB)</b><span id="dbRealtimeValue">‚Äî</span></div>
          <div class="kv-item"><b>AVG (dB)</b><span id="dbAvgValue">‚Äî</span></div>
          <div class="kv-item"><b>MAX (dB)</b><span id="dbMaxValue">‚Äî</span></div>
        </div>
      </div>

      <!-- RMS / Peak / ATH -->
      <div class="card">
        <div class="values-grid">
          <div class="kv-item">
            <b>‡∏£‡∏∞‡∏î‡∏±‡∏ö RMS (‡∏î‡∏¥‡∏ö dBFS)</b>
            <span id="rms">‚Äî</span>
          </div>
          <div class="kv-item">
            <b>‡πÇ‡∏ô‡πâ‡∏ï‡∏à‡∏≤‡∏Å ATH</b>
            <span id="peak">‚Äî</span>
          </div>
          <div class="kv-item">
            <b>All-Time High Peak</b>
            <span id="athPeak">‚Äî</span>
          </div>
        </div>
      </div>

      <!-- Calibration -->
      <div class="card">
        <div class="hint" style="flex-basis: 100%; margin-bottom: 4px;">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏≠‡∏ü‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á dBFS ‡πÄ‡∏õ‡πá‡∏ô dB (‡∏à‡∏≤‡∏Å‡πÑ‡∏°‡∏Ñ‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)</div>
        <div class="row calibration-control" style="justify-content: space-between; align-items: center; flex-wrap: wrap; width: 100%;">
          <label for="calibrationSlider" style="flex-shrink: 0; margin-right: 8px;">Calibration</label>
          <button class="ghost" id="btnCalibrateMinus">-</button>
          <input type="range" id="calibrationSlider" min="50" max="150" step="1" value="80" style="flex-grow: 1; min-width: 120px;">
          <button class="ghost" id="btnCalibratePlus">+</button>
          <input type="number" id="calibrationOffset" value="80" style="width: 70px; text-align: center; margin-left: 8px;">
        </div>
      </div>

      <!-- Disclaimer -->
      <div class="card">
        <p class="hint" style="margin:0; text-align: center;"><b>‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î:</b> ‡πÑ‡∏°‡∏Ñ‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏°‡∏µ DSP/AGC ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÑ‡∏°‡πà‡πÅ‡∏ü‡∏•‡∏ï ‡πÉ‡∏ä‡πâ‡∏î‡∏π‡πÅ‡∏ô‡∏ß EQ ‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö SPL ‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</p>
      </div>
    </div>
  </div>

  <!-- Floating command dock (icon-only) -->
  <div class="float-dock" aria-label="Quick controls">
    <button id="fabStart" class="fab" title="‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏î">‚ñ∂Ô∏è</button>
    <button id="fabStop"  class="fab" title="‡∏´‡∏¢‡∏∏‡∏î" disabled>‚è∏Ô∏è</button>
    <button id="fabHold"  class="fab" title="Hold Peak" aria-pressed="true">üìå</button>
    <button id="fabClear" class="fab" title="Clear Peak & ATH">‚ôªÔ∏è</button>
    <button id="fabAwt"   class="fab" title="A-weighting" aria-pressed="false">üéß</button>
  </div>

  <!-- ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ) -->
  <script>
  (() => {
    /* ‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏≠‡∏õ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (RTAnalyzer, event bindings, draw, mic ‡∏Ø‡∏•‡∏Ø) ‚Äî ‡∏Ñ‡∏á‡πÑ‡∏ß‡πâ‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ
       ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏ß‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
       ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏ö‡∏±‡πä‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ï‡∏∞‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå
    */
  })();
  </script>
</body>
</html>
